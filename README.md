# opencv2
カメラから映像を取得して以下の処理を行う.   
・コントラスト変換  
・色調変更   
・上の処理をリセットしてオリジナルの画像に戻す   
[使用方法]  
トラックバーを動かしてR,G,B,gamma,resetの値を変更して処理を行う.  
[実装]  
cv2.namedWindow()で取得した映像を表示するウインドウを作り, 
cv2.createTrackbar()で各値に対応したトラックバーを設置する.(cv2.setTrackbarPos()でラベルの初期位置をreset以外10にする)  
cv2.VideoCapture(0)でVideoCapture オブジェクトを取得する.  

ここからはwhile文で連続的に画像を取得する.  
変数frameに取得した画像が代入され,これを用いて画像に処理を行う.  
cv2.getTrackbarPos()で各トラックバーから値を獲得する.
cv2.imshow()で処理された画像を表示する.

<各処理の実装>  
・コントラスト変換  
cv2.getTrackbarPos()で変数gammaに代入された値を用いてガンマ変換を行う.  
frame[:,:,:] = ( ( frame[:,:,:] / 255 ) ** ( gamma / 10 ) ) *255  
frameの全ての要素を0から1の値に換えて,ガンマ変換をかけたあとに0から255の値に戻してコントラスト変換を行う.  
トラックバー初期位置(10)ではオリジナルの画像にするためgammaを10で割っている.
gammaの値が大きいほど暗く,低いほど明るい画像になる.  

・色調変更  
frame[x,y,z]の添字zが色空間BGRに対応している.  
cv2.getTrackbarPos()で変数b,g,rに代入された値を用いて処理を行う.  
frame[:,:,0] = ( ( frame[:,:,0] / 255 ) ** ( 11 / (b+1) ) ) *255  
frame[:,:,1] = ( ( frame[:,:,1] / 255 ) ** ( 11 / (g+1) ) ) *255  
frame[:,:,2] = ( ( frame[:,:,2] / 255 ) ** ( 11 / (r+1) ) ) *255  
青色の要素を変更する場合は,  
frame[:,:,0]の要素を0から1の値に換えて,(11 / (b+1)) 乗し,0から255の値に戻して色調変更している.  
緑,赤に対しても同様の処理を行う.  
トラックバー初期位置(10)ではオリジナルの画像にし,0で割らないために11をb,g,rに１を加えた値で割っている.
b,g,rの値が大きいほど各要素の影響が強い画像になり,小さいほど各要素の影響が小さい画像となる. 

・リセット  
cv2.getTrackbarPos()で変数resetに代入された値を用いて上の処理のリセットを行う.  
resetの値が1になったときcv2.setTrackbarPos()を用いて各トラックバーの位置を初期位置に戻す.  


[バージョン]Python 3.6.5   Anaconda custom (64-bit)  
[参考]  
「ユーザインタフェース」http://opencv.jp/opencv-2.1/cpp/user_interface.html  
[動作確認]  
https://youtu.be/FtinUEQHVXQ
